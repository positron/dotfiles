#!/bin/bash

# Install vundle plugin for vimrc
if [ ! -d ~/.vim/bundle/vundle ]; then
  mkdir -p ~/.vim/bundle/vundle
  git clone https://github.com/gmarik/vundle.git ~/.vim/bundle/vundle
fi

# Configure vim
if [ -a ~/.vimrc ]; then
  mv ~/.vimrc ~/.vimrc.bak
fi
ln -sf `pwd`/.vimrc ~
mkdir -p ~/.vim/backupdir
mkdir -p ~/.vim/undodir
mkdir -p ~/.vim/swpdir
#vim +BundleInstall! +qall

# Configure tmux
if [ -a ~/.tmux.conf ]; then
  mv ~/.tmux.conf ~/.tmux.conf.bak
fi
ln -sf `pwd`/.tmux.conf ~

# Configure mercurial
if [ -a ~/.hgrc ]; then
  mv ~/.hgrc ~/.hgrc.ba
fi
ln -sf `pwd`/mercurial/.hgrc ~
ln -sf `pwd`/mercurial/hgignore.ini ~/.hgignore


# Configure screen
if [ -a ~/.screenrc ]; then
  mv ~/.screenrc ~/.screenrc.bak
fi
ln -sf `pwd`/.screenrc ~

mkdir -p ~/.teamocil/
ln -sfb `pwd`/teamocil/* ~/.teamocil

# If cygwin, configure mintty
if [ `uname -o` == "Cygwin" ]; then
  ln -sf `pwd`/.minttyrc ~
fi

# Configure git
git config --global color.ui true
git config --global user.name "Philip Jagielski"
git config --global user.email "philipjagielski@gmail.com"
git config --global core.editor vim
git config --global merge.tool vimdiff

# source .bashrc_dotfiles if .bashrc doesn't already
if ! grep -q bashrc_dotfiles ~/.bashrc; then
   echo "Sourcing bashrc_dotfiles in .bashrc"
   echo "source `pwd`/.bashrc_dotfiles" >> ~/.bashrc
   . ~/.bashrc
fi
